/*! Copyright 2013-2015 etc Chris Tabor. Licensed under MIT. */

// colors
$inactive: #ccc;
$active: $primary-color;
$completed-bg: $primary-color;
$default-bg: $white;

// sizing
$donut-size: 50px;
$donut-line-thickness: 5px;
$border-thickness: 5px;

@mixin donut-style($state) {
  //background-color: $color;
  border: $border-thickness solid $active;
  color: $active;
  z-index: -1;

  @if $state == "completed" {
    color: transparent;
    background-color: $completed-bg;
    content: "1";
  }

  &::before,
  &::after {
    background-color: $active;
    z-index: -2;
  }
}

%flexer,
.flexer {
  display: flex;
  justify-content: space-between;
}

%flexer--vertical,
.flexer--vertical {
  display: flex;
  flex-direction: column;
}

html.flexbox {
  .c-progress-checkout {
    @extend %flexer;
  }
}

html.no-flexbox {
  .c-progress-checkout {
    display: table;
    width: 100%;

    .c-progress-checkout__item {
      display: table-cell;
    }
  }
}

.c-progress-checkout {
  font-size: 80%;
  margin-bottom: 1em;

  @include mq($until: md) {
    overflow: visible;
    width: 173%;
  }


  &.c-progress-checkout__3 {
    @include mq($until: md) {
      margin-left: -37%;
    }
  }

  &.c-progress-checkout__4 {
    @include mq($until: md) {
      margin-left: -75%;
    }
  }

  &.c-progress-checkout__5 {
    @include mq($until: md) {
      margin-left: -75%;
    }
  }

  a {
    color: $inactive;
    display: block;
    cursor: pointer;
  }

  li {
    list-style: none;
    text-align: center;
    width: auto;
    position: relative;
    text-overflow: ellipsis;
    color: $inactive;
    z-index: 1;
  }

  li span.c-donut {
    border-radius: 50%;
    width: $donut-size;
    height: $donut-size;
    background-color: $default-bg;
    display: block;
    margin: 0 auto 0.2em auto;
    border: $border-thickness solid $inactive;
    color: $inactive;

    @include font-size(20px);

    line-height: 1.9em;
  }

  // line connectors
  li span.c-donut:before,
  li span.c-donut:after {
    display: block;
    position: absolute;
    top: $donut-size / 2 - $border-thickness / 2;
    min-width: 500px;
    height: $donut-line-thickness;
    content: '';
    background-color: $inactive;
    z-index: -2;
  }

  li:first-child span.c-donut:before,
  li:first-child span.c-donut:after {
    //min-width: 500px;

  }

  li:last-child span.c-donut:before,
  li:last-child span.c-donut:after {
    overflow-x: hidden;
    background-color: $white;
  }

  // completed state
  //
  .completed {
    color: $active;

    &::after {
      /*Add another block-level blank space*/
      font-family: 'flex-icons';
      content: $icon-large-tick;

      @include font-size(20px);

      color: $white;
      z-index: 9999;

      /*Centre the position*/
      @include center(x, abs);

      top: 0.8em;
    }

    .c-donut {
      @include donut-style("completed");
    }
  }

  li.active {
    color: $active;
    text-decoration: none;

    .c-donut {
      @include donut-style("active");
    }
  }
}